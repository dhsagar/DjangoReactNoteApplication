{"ast":null,"code":"import _objectSpread from\"C:/01. Local Drive/Practice/python/Django/DjangoReactNoteApplication/react-noteapp-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/01. Local Drive/Practice/python/Django/DjangoReactNoteApplication/react-noteapp-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/01. Local Drive/Practice/python/Django/DjangoReactNoteApplication/react-noteapp-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\01. Local Drive\\\\Practice\\\\python\\\\Django\\\\DjangoReactNoteApplication\\\\react-noteapp-frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useEffect,useState}from\"react\";import{useParams}from'react-router-dom';import{ReactComponent as ArrowLeft}from\"../assets/arrow-left.svg\";import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NotePage=function NotePage(_ref){var match=_ref.match;var _useParams=useParams(),id=_useParams.id;var navigate=useNavigate();var noteId=id;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNote=_useState2[1];useEffect(function(){getNote();},[noteId]);var getNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(noteId==='new')){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return fetch(\"/api/notes/\".concat(noteId));case 4:response=_context.sent;_context.next=7;return response.json();case 7:data=_context.sent;setNote(data);case 9:case\"end\":return _context.stop();}}},_callee);}));return function getNote(){return _ref2.apply(this,arguments);};}();var createNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:fetch(\"/api/notes/\",{method:\"POST\",headers:{'content-type':'application/json'},body:JSON.stringify(note)});navigate('/');case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function createNote(){return _ref3.apply(this,arguments);};}();var updateNote=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:fetch(\"/api/notes/\".concat(noteId,\"/\"),{method:\"PUT\",headers:{'content-type':'application/json'},body:JSON.stringify(note)});case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function updateNote(){return _ref4.apply(this,arguments);};}();var deleteNote=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:fetch(\"/api/notes/\".concat(noteId,\"/\"),{method:\"DELETE\",headers:{'content-type':'applocation/json'}});navigate('/');case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function deleteNote(){return _ref5.apply(this,arguments);};}();var handleSubmit=function handleSubmit(){if(noteId!=='new'&&!note.body){//console.log('part1', note.body)\ndeleteNote();}else if(noteId!=='new'){//console.log(note.body)\nupdateNote();}else if(noteId==='new'&&note!=null){//console.log('part3')\ncreateNote();}//issues with history, use navigate instead\nnavigate('/');};return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(ArrowLeft,{onClick:handleSubmit})}),noteId!=='new'?/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:\"Delete\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Done\"})]}),/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(e){setNote(_objectSpread(_objectSpread({},note),{},{'body':e.target.value}));},value:note===null||note===void 0?void 0:note.body})]});};// do not use defuaultValue={note?.body} // use value={note?body} instead\nexport default NotePage;","map":{"version":3,"names":["React","useEffect","useState","useParams","ReactComponent","ArrowLeft","useNavigate","NotePage","match","id","navigate","noteId","note","setNote","getNote","fetch","response","json","data","createNote","method","headers","body","JSON","stringify","updateNote","deleteNote","handleSubmit","e","target","value"],"sources":["C:/01. Local Drive/Practice/python/Django/DjangoReactNoteApplication/react-noteapp-frontend/src/pages/NotePage.js"],"sourcesContent":["import React, {useEffect, useState } from \"react\";\r\nimport { useParams } from 'react-router-dom';\r\nimport { ReactComponent as ArrowLeft} from \"../assets/arrow-left.svg\";\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\n\r\nconst NotePage = ({match}) => {\r\n    const { id } = useParams()\r\n    const navigate = useNavigate();\r\n    let noteId = id\r\n    let [note, setNote] = useState(null)\r\n\r\n    useEffect(()=>{\r\n        getNote()\r\n        }, [noteId])\r\n\r\n\r\n    let getNote = async ()=> {\r\n        if(noteId==='new') return\r\n\r\n        let response = await fetch(`/api/notes/${noteId}`)\r\n        let data = await response.json()\r\n        setNote(data)\r\n    }\r\n    let createNote = async ()=> {\r\n        fetch(`/api/notes/`, {\r\n            method: \"POST\",\r\n            headers: {\r\n                'content-type':'application/json'\r\n            },\r\n            body: JSON.stringify(note)\r\n        })\r\n        navigate('/');\r\n    }\r\n\r\n    let updateNote = async ()=> {\r\n        fetch(`/api/notes/${noteId}/`, {\r\n            method: \"PUT\",\r\n            headers: {\r\n                'content-type':'application/json'\r\n            },\r\n            body: JSON.stringify(note)\r\n        })\r\n\r\n    }\r\n\r\n    let deleteNote = async ()=> {\r\n        fetch(`/api/notes/${noteId}/`,{\r\n            method:\"DELETE\",\r\n            headers: {\r\n                'content-type':'applocation/json'\r\n            }\r\n        })\r\n        navigate('/');\r\n    }\r\n\r\n    let handleSubmit = ()=> {\r\n        if(noteId!=='new' && !note.body){\r\n            //console.log('part1', note.body)\r\n            deleteNote()\r\n        } else if (noteId!=='new'){\r\n            //console.log(note.body)\r\n            updateNote()\r\n        } else if (noteId==='new' && note!=null){\r\n            //console.log('part3')\r\n            createNote()\r\n        }\r\n        //issues with history, use navigate instead\r\n        navigate('/');\r\n    }\r\n\r\n\r\n    return(\r\n        <div className={\"note\"}>\r\n            <div className={\"note-header\"}>\r\n                <h3>\r\n\r\n                    <ArrowLeft onClick= {handleSubmit} />\r\n\r\n                </h3>\r\n                {noteId!=='new'?(\r\n                    <button onClick={deleteNote}>Delete</button>\r\n                ):\r\n                    (\r\n                        <button onClick={handleSubmit}>Done</button>\r\n                    )\r\n\r\n                }\r\n\r\n            </div>\r\n            <textarea onChange={(e)=> {setNote({...note, 'body':e.target.value})}} value={note?.body}></textarea>\r\n\r\n        </div>\r\n    )\r\n}\r\n// do not use defuaultValue={note?.body} // use value={note?body} instead\r\nexport default NotePage"],"mappings":"itBAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAA0C,OAA1C,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,OAASC,cAAc,GAAIC,CAAAA,SAA3B,KAA2C,0BAA3C,CACA,OAASC,WAAT,KAA4B,kBAA5B,C,wFAGA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,MAAa,IAAXC,CAAAA,KAAW,MAAXA,KAAW,CAC1B,eAAeL,SAAS,EAAxB,CAAQM,EAAR,YAAQA,EAAR,CACA,GAAMC,CAAAA,QAAQ,CAAGJ,WAAW,EAA5B,CACA,GAAIK,CAAAA,MAAM,CAAGF,EAAb,CACA,cAAsBP,QAAQ,CAAC,IAAD,CAA9B,wCAAKU,IAAL,eAAWC,OAAX,eAEAZ,SAAS,CAAC,UAAI,CACVa,OAAO,GACN,CAFI,CAEF,CAACH,MAAD,CAFE,CAAT,CAKA,GAAIG,CAAAA,OAAO,2FAAG,0JACPH,MAAM,GAAG,KADF,wFAGWI,CAAAA,KAAK,sBAAeJ,MAAf,EAHhB,QAGNK,QAHM,qCAIOA,CAAAA,QAAQ,CAACC,IAAT,EAJP,QAINC,IAJM,eAKVL,OAAO,CAACK,IAAD,CAAP,CALU,sDAAH,kBAAPJ,CAAAA,OAAO,2CAAX,CAOA,GAAIK,CAAAA,UAAU,2FAAG,wIACbJ,KAAK,eAAgB,CACjBK,MAAM,CAAE,MADS,CAEjBC,OAAO,CAAE,CACL,eAAe,kBADV,CAFQ,CAKjBC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeZ,IAAf,CALW,CAAhB,CAAL,CAOAF,QAAQ,CAAC,GAAD,CAAR,CARa,wDAAH,kBAAVS,CAAAA,UAAU,2CAAd,CAWA,GAAIM,CAAAA,UAAU,2FAAG,wIACbV,KAAK,sBAAeJ,MAAf,MAA0B,CAC3BS,MAAM,CAAE,KADmB,CAE3BC,OAAO,CAAE,CACL,eAAe,kBADV,CAFkB,CAK3BC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeZ,IAAf,CALqB,CAA1B,CAAL,CADa,wDAAH,kBAAVa,CAAAA,UAAU,2CAAd,CAWA,GAAIC,CAAAA,UAAU,2FAAG,wIACbX,KAAK,sBAAeJ,MAAf,MAAyB,CAC1BS,MAAM,CAAC,QADmB,CAE1BC,OAAO,CAAE,CACL,eAAe,kBADV,CAFiB,CAAzB,CAAL,CAMAX,QAAQ,CAAC,GAAD,CAAR,CAPa,wDAAH,kBAAVgB,CAAAA,UAAU,2CAAd,CAUA,GAAIC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAK,CACpB,GAAGhB,MAAM,GAAG,KAAT,EAAkB,CAACC,IAAI,CAACU,IAA3B,CAAgC,CAC5B;AACAI,UAAU,GACb,CAHD,IAGO,IAAIf,MAAM,GAAG,KAAb,CAAmB,CACtB;AACAc,UAAU,GACb,CAHM,IAGA,IAAId,MAAM,GAAG,KAAT,EAAkBC,IAAI,EAAE,IAA5B,CAAiC,CACpC;AACAO,UAAU,GACb,CACD;AACAT,QAAQ,CAAC,GAAD,CAAR,CACH,CAbD,CAgBA,mBACI,aAAK,SAAS,CAAE,MAAhB,wBACI,aAAK,SAAS,CAAE,aAAhB,wBACI,iCAEI,KAAC,SAAD,EAAW,OAAO,CAAGiB,YAArB,EAFJ,EADJ,CAMKhB,MAAM,GAAG,KAAT,cACG,eAAQ,OAAO,CAAEe,UAAjB,oBADH,cAIO,eAAQ,OAAO,CAAEC,YAAjB,kBAVZ,GADJ,cAiBI,iBAAU,QAAQ,CAAE,kBAACC,CAAD,CAAM,CAACf,OAAO,gCAAKD,IAAL,MAAW,OAAOgB,CAAC,CAACC,MAAF,CAASC,KAA3B,GAAP,CAA0C,CAArE,CAAuE,KAAK,CAAElB,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEU,IAApF,EAjBJ,GADJ,CAsBH,CAxFD,CAyFA;AACA,cAAef,CAAAA,QAAf"},"metadata":{},"sourceType":"module"}